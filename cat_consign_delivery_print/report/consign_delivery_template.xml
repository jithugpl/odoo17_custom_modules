<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="new_layout">

        <t t-if="not o" t-set="o" t-value="doc"/>
        <t t-if="not company">
            <!-- Multicompany -->
            <t t-if="company_id">
                <t t-set="company" t-value="company_id"/>
            </t>
            <t t-elif="o and 'company_id' in o and o.company_id.sudo()">
                <t t-set="company" t-value="o.company_id.sudo()"/>
            </t>
            <t t-else="else">
                <t t-set="company" t-value="res_company"/>
            </t>
        </t>
        <div class="header no-page-break">
            <div class="row" style="report_header_style; border-bottom: 1px solid black; margin-bottom: 10px;">
                <div class="col-4">
                    <img alt="img" t-if="company.logo" t-att-src="image_data_uri(company.logo)"
                         style="max-height:130px;"/>
                </div>
                <div class="col-4">
                </div>
                <div class="col-4">
                    <h6>
                        <b>
                            <span style=" color:#0a2351;" t-esc="o.company_id.name.upper()"/>
                        </b>
                    </h6>
                    <span t-field="o.company_id.street"/>
                    <span t-field="o.company_id.street2"/>
                    <br></br>
                    <!--                    <span t-field="o.company_id.city"/><br/>-->
                    <span t-field="o.company_id.country_id"/>
                    <t t-if="o.company_id.vat">
                        <br/>
                        <span>TRN:
                            <span t-field="o.company_id.vat"/>
                        </span>
                    </t>
                </div>
            </div>
        </div>
        <div class="article o_report_layout_standard">
            <p>
                <t t-out="0"/>
            </p>
        </div>

        <div class="footer no-page-break">
            <div class="text-center" style="border-top: 1px solid black;">

                <br/>
                <!--                <p style="margin-right: 600px;">-->
                <!--                    <strong>Inv No:</strong>-->
                <!--                    <span t-esc="doc.name"/>-->
                <!--                </p>-->

                <p>Page
                    <span class="page"/>
                    /
                    <span class="topage"/>
                </p>

            </div>
        </div>
    </template>

    <template id="report_consignment_delivery">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="cat_consign_delivery_print.new_layout">

                    <div class="page">
                        <t t-if="not o" t-set="o" t-value="doc"/>
                        <t t-if="not company">
                            <!-- Multicompany -->
                            <t t-if="company_id">
                                <t t-set="company" t-value="company_id"/>
                            </t>
                            <t t-elif="o and 'company_id' in o and o.company_id.sudo()">
                                <t t-set="company" t-value="o.company_id.sudo()"/>
                            </t>
                            <t t-else="else">
                                <t t-set="company" t-value="res_company"/>
                            </t>
                        </t>
                        <div class="row">
                            <div class="col-10" style="margin-top:70px; ">
                                <b>Delivery Address:</b>
                                <br></br>
                                <span t-field="o.partner_id"/>
                                <br></br>
                                <span t-field="o.partner_id.street"/>
                                <br></br>
                                <span t-field="o.partner_id.street2"/>
                                <span t-field="o.partner_id.state_id"/>
                                <br></br>
                                <span t-field="o.partner_id.country_id"/>
                                <br></br>
                                <span class="fa fa-phone" aria-hidden="true" t-field="o.partner_id.phone"/>
                            </div>
                        </div>
                        <div class="oe_structure"/>
                        <!--                        <h2>-->
                        <!--                            <span t-field="doc.name"/>-->
                        <!--                        </h2>-->
                        <br></br>

                        <div class="col-4"
                             style="margin-top:80px; margin-left:560px; margin-top:-130px; color:#333333;">
                            <span>
                                <strong>Delivery No:</strong>
                            </span>
                            <span style="color:#7A1712; " t-field="o.name"></span>
                            <br></br>
                            <span>
                                <strong>Order:</strong>
                                <span t-field="o.origin"/>
                            </span>
                            <br></br>
                            <span>
                                <strong>Customer ID:</strong>
                                <span t-field="o.partner_id.customer_id"/>
                            </span>
                            <br></br>

                            <span>
                                <strong>Shipping Date:</strong>
                                <span t-field="o.scheduled_date"/>
                            </span>
                            <br/>
                            <br></br>
                            <!--                                  <span><strong>Carrier:</strong>-->
                            <!--&lt;!&ndash;                                      <span t-field="o.scheduled_date"/>&ndash;&gt;-->
                            <!--                                  </span>-->


                        </div>

                    </div>

                    <div>
                        <style>

                            .no-page-break {
                            page-break-inside: avoid;
                            }

                            .page-break {
                            page-break-before: always;
                            page-break-after: always;
                            }

                            table {
                            width: 100%;
                            border-collapse: collapse;
                            margin-top:30px;
                            page-break-inside: auto;

                            }
                            th, td {
                            border: 1px solid black;
                            padding: 8px;
                            text-align: left;
                            }
                            th {
                            color:#0a2351;
                            text-align:center;
                            }
                            td{
                            color:#333333;
                            font:Verdana (sans-serif);


                            }
                        </style>
                        <table>
                            <thead>
                                <tr>

                                    <th colspan="8" style="width:100%">PRODUCT</th>
                                    <th colspan="1">BARCODE</th>
                                    <th colspan="1">LOT/SERIAL NUMBER</th>
                                    <th colspan="1">ORDER QTY</th>
                                    <th colspan="1">DELIVER QTY</th>

                                    <th colspan="1">UOM</th>
                                    <th colspan="1">RATE</th>
                                    <!--                                    <th colspan="1">Taxable Value</th>-->
                                    <!--                                    <th colspan="1">GST</th>-->
                                    <th colspan="1">TOTAL</th>

                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="total_list_price" t-value="0.0"/>
                                <t t-set="line_total" t-value="0.0"/>
                                <t t-set="total_taxes" t-value="0.0"/>
                                <t t-foreach="o. move_line_ids" t-as="line">
                                    <t t-set="list_price" t-value="line.product_id.list_price"/>
                                    <t t-set="prod_rate" t-value="(list_price*line.quantity)"/>
                                    <t t-set="taxes" t-value="line.product_id.taxes_id.amount"/>
                                    <t t-set="line_total" t-value="line_total+prod_rate"/>
                                    <t t-set="total_list_price" t-value="total_list_price + list_price"/>
                                    <t t-set="total_taxes" t-value="total_taxes + taxes"/>
                                    <tr>

                                        <td colspan="8" style="width:100%">
                                            <span t-esc="line.product_id.display_name"/>
                                        </td>
                                        <td colspan="1">
                                            <span t-field="line.product_id.barcode"/>
                                        </td>
                                        <td colspan="1">
                                            <span t-field="line.lot_id.name"/>
                                        </td>

                                        <td colspan="1">
                                            <span t-esc="line.move_id.product_uom_qty"/>
                                        </td>
                                        <td colspan="1">
                                            <span t-esc="line.quantity"/>
                                        </td>

                                        <t t-set="pd" t-value="product_template"/>

                                        <td colspan="1">

                                            <span t-field="line.product_uom_id"/>
                                            <!--                                            <span t-if="line.move_id.product_uom_id" t-field="line.move_id.product_uom_id"/>-->
                                        </td>

                                        <td colspan="1">
                                            <span t-field="line.product_id.list_price"/>
                                        </td>
                                        <td colspan="1">
                                            <span t-esc="prod_rate"/>
                                        </td>
                                        <!--                                        <td colspan="1">-->
                                        <!--&lt;!&ndash;                                            <span t-field="line.product_id.taxes_id"/>&ndash;&gt;-->
                                        <!--                                            <span t-esc="taxes"/>-->
                                        <!--                                        </td>-->
                                        <!--                                        <td colspan="1">-->
                                        <!--                                            <span t-esc="line_total"/>-->
                                        <!--                                        </td>-->

                                    </tr>
                                </t>
                                <br></br>
                                <tr>
                                    <td colspan="14" style="text-align:right">Grand Total</td>
                                    <td>
                                        <span t-esc="line_total"/>
                                    </td>
                                </tr>
                                <!--                                <tr>-->
                                <!--                                    <td colspan="9" style="text-align:right">Total</td>-->
                                <!--                                    <td colspan="10">-->

                                <!--                                    </td>-->
                                <!--                                </tr>-->


                            </tbody>
                        </table>

                        <!--                        ENDING -->
                        <br></br>
                        <div class="no-page-break">
                            <style>
                                .no-page-break {
                                page-break-inside: avoid;
                                }

                                .page-break {
                                page-break-before: always;
                                page-break-after: always;
                                }

                                table {
                                width: 100%;
                                border-collapse: collapse;
                                margin-top: 50px;
                                page-break-inside: auto;
                                }
                                th, td {
                                border: 1px solid black;
                                padding: 8px;
                                text-align: left;
                                }
                                th {
                                color: #0a2351;
                                text-align: center;
                                }
                                td {
                                color: #333333;
                                font: Verdana, sans-serif;
                                }
                            </style>
                            <table class="table-borderless mt-50" style="width: 100%; border: none;">
                                <tr>
                                    <td style="text-align: left; border-right: none">
                                        Released By
                                        <br/>
                                        <br/>
                                        <br/>
                                    </td>
                                    <td style="text-align: right; border: none; ">
                                        Picking Confirmation
                                        <br/>
                                        <br/>
                                        <br/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: left; border: none">
                                        <!--                        <span t-field="o.group_id.sale_id.user_id"/>-->
                                    </td>
                                    <td style="text-align: right; border: none;">
                                        <br/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: left; border: none">
                                        <span>___________________________</span>
                                    </td>
                                    <td style="text-align: right; border: none; ">
                                        <span>___________________________</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>