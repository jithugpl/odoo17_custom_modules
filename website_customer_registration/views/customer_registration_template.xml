<odoo>
    <template id="customer_registration_page" name="Customer Registration Page">
        <t t-call="website.layout">
            <div class="container"
                 style="display: flex; justify-content: center; margin-top: 50px;margin-bottom: 50px;">
                <div style="max-width: 600px; width: 100%; background-color: #f9f9f9; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); padding: 20px;background-size: cover;
                    background-repeat: no-repeat;">
                    <h1 style="text-align: center; color: #333; font-size: 24px; margin-bottom: 20px;">Customer
                        Registration
                    </h1>
                    <form action="/customer/register/submit" method="post" class="oe_website_form"
                          enctype="multipart/form-data">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                        <div class="form-group" style="margin-bottom: 15px;">
                            <label for="name" style="font-weight: bold; color: #555;">Name</label>
                            <input type="text" name="name" id="name" class="form-control" required="True"
                                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"/>
                        </div>

                        <div class="form-group" style="margin-bottom: 15px;">
                            <label for="email" style="font-weight: bold; color: #555;">Email</label>
                            <input type="email" name="email" id="email" class="form-control" required="True"
                                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"/>
                        </div>

                        <div class="form-group" style="margin-bottom: 15px;">
                            <label for="phone" style="font-weight: bold; color: #555;">Phone</label>
                            <input type="tel" name="phone" id="phone" class="form-control" required="True"
                                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"/>
                        </div>

                        <div class="form-group" style="margin-bottom: 15px;">
                            <label for="address" style="font-weight: bold; color: #555;">Address</label>
                            <textarea name="address" id="address" class="form-control"
                                      style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"/>
                        </div>

                        <button type="submit" class="btn btn-primary"
                                style="width: 100%; padding: 10px; background-color: #007bff; color: #fff; border: none;
                                   border-radius: 4px; font-weight: bold; cursor: pointer;">
                            Register
                        </button>
                    </form>
                </div>
            </div>
        </t>
    </template>


    <template id="customer_registration_confirmation_page" name="Customer Registration Confirmation">
        <t t-call="website.layout">
            <div class="container" style="display: flex; justify-content: center; align-items: center; height: 80vh;">
                <div style="max-width: 600px; width: 100%; background-color: #f8f9fa;
                        border-radius: 8px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); padding: 40px;
                        text-align: center;">
                    <!--                    <img src="/path/to/thank_you_icon.png" alt="Thank You" style="width: 80px; margin-bottom: 20px;">-->
                    <h1 style="color: #333; font-size: 26px; margin-bottom: 10px;">Registration Successful!</h1>
                    <p style="color: #555; font-size: 16px; margin-bottom: 20px;">
                        Thank you for registering. We will contact you soon.
                    </p>
                    <a href="/" class="btn btn-primary"
                       style="padding: 10px 20px; font-size: 16px; font-weight: bold; text-decoration: none;
                          color: #fff; background-color: #007bff; border-radius: 4px;">
                        Return to Home
                    </a>
                </div>
            </div>
        </t>
    </template>


    <template id="customer_registration_success" name="Customer Registration Success">
        <t t-call="website.layout">
            <div class="container">
                <h2>Thank you for registering!</h2>
                <p>Your registration has been successfully submitted. We will contact you shortly.</p>
                <a t-att-href="'/customer/registration/' + str(registration_id)" class="btn btn-info">
                    View Uploaded Files
                </a>
            </div>
        </t>
    </template>
    <record id="menu_customer_registration" model="website.menu">
        <field name="name">Customer Registration</field>
        <field name="url">/customer/register</field>
        <field name="parent_id" ref="website.main_menu"/>
        <field name="sequence" eval="10"/>
    </record>
    <!-- File: file_upload_confirmation.xml -->
    <template id="file_upload_confirmation" name="File Upload Confirmation">
        <t t-call="website.layout">
            <div class="container mt-4">
                <h3>File Uploaded Successfully!</h3>
                <p>Your file "<t t-esc="file_name"/>" has been successfully uploaded for registration ID<t
                        t-esc="partner_id"/>.
                </p>
                <a href="/" class="btn btn-primary">Return to Home</a>
            </div>
        </t>
    </template>

    <template id="file_upload_form" name="File Upload Form">
        <t t-call="website.layout">
            <div class="container mt-4">
                <h3>Upload File for Customer Registration</h3>
                <form action="/customer/files" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    <input type="hidden" name="partner_id"/>
                    <div class="form-group">
                        <label for="registration_id">Mail ID</label>
                        <input type="mail" name="mail_id" id="mail_id" class="form-control"
                               required="required" placeholder="Enter Mail ID"/>
                    </div>
                    <div class="form-group">
                        <label for="file_name">File Name</label>
                        <input type="text" name="file_name" id="file_name" class="form-control" required="required"
                               placeholder="Enter File Name"/>
                    </div>
                    <div class="form-group">
                        <label for="file">Choose File</label>
                        <input type="file" name="file_data" id="file" class="form-control" required="required"/>
                    </div>
                    <button type="submit" class="btn btn-success mt-3">Upload File</button>
                </form>
            </div>
        </t>
    </template>

    <!--    <template id="file_upload_form" name="File Upload Form">-->
    <!--        <t t-call="website.layout">-->
    <!--            <div class="container mt-4">-->
    <!--                <h3>Upload File for Customer Registration</h3>-->
    <!--                <form action="/customer/files" method="post" enctype="multipart/form-data">-->
    <!--                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>-->
    <!--                    -->

    <!--                    <div class="form-group">-->
    <!--                        <label for="registration_id">Mail ID</label>-->
    <!--                        <input type="mail" name="mail_id" id="mail_id" class="form-control"-->
    <!--                               required="required" placeholder="Enter Mail ID"/>-->
    <!--                    </div>-->
    <!--                    <div class="form-group">-->
    <!--                        <label for="file_name">File Name</label>-->
    <!--                        <input type="text" name="file_name" id="file_name" class="form-control" required="required"-->
    <!--                               placeholder="Enter File Name"/>-->
    <!--                    </div>-->
    <!--                    <div class="form-group">-->
    <!--                        <label for="file">Choose File</label>-->
    <!--                        <input type="file" name="file" id="file" class="form-control" required="required"/>-->
    <!--                    </div>-->
    <!--                    <button type="submit" class="btn btn-success mt-3">Upload File</button>-->
    <!--                </form>-->
    <!--            </div>-->
    <!--        </t>-->
    <!--    </template>-->
    <template id="file_upload_form" name="File Upload Form">
        <t t-call="website.layout">
            <!--            <t t-esc="partner_id.name"/>-->
            <form t-att-action="'/customer/upload/file/' + str(partner_id)" method="post"
                  enctype="multipart/form-data">
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                <!--            <form action="/customer/registration/<int:registration_id>" method="post" enctype="multipart/form-data">-->
                <!--                <input type="hidden" name="partner_id" t-att-value="partner_id"/>-->
                <label for="file_name">File Name:</label>

                <input type="text" name="file_name" required="true"/>
                <label for="file">Upload File:</label>
                <input type="file" name="file" required="true"/>
                <button type="submit">Upload</button>
            </form>
        </t>
    </template>

    <template id="registration_files" name="Registration Files">
        <t t-call="website.layout">
            <div class="container">
                <h1>Customer Registration Files</h1>
                <h3>
                    <t t-esc="registration.name"/>
                </h3>
                <p>
                    <strong>Email:</strong>
                    <t t-esc="registration.email"/>
                </p>
                <p>
                    <strong>Phone:</strong>
                    <t t-esc="registration.phone"/>
                </p>
                <t t-if="files">
                    <ul>
                        <t t-foreach="files" t-as="file">
                            <li>
                                <!-- Debugging: Print file object to verify its structure -->
                                <t t-esc="file"/>
                                <a t-att-href="'/web/content/res.partner/' + str(file.id) + '/file_data?download=true'">
                                    <t t-esc="file.file_name"/>
                                    (Download)
                                </a>
                            </li>
                        </t>
                    </ul>
                </t>


                <t t-if="files">
                    <ul>
                        <t t-foreach="files" t-as="file">
                            <li>
                                <a t-att-href="'/web/content/res.partner/' + str(file.id) + '/file_data?download=true'">
                                    <t t-esc="file.file_name"/>
                                    (Download)
                                </a>
                            </li>
                        </t>
                    </ul>
                </t>
                <t t-else="">
                    <p>No files uploaded for this registration.</p>
                </t>


                <div class="file-gallery row g-4">
                    <t t-foreach="files" t-as="file">
                        <div class="col-md-4 col-sm-6">
                            <div class="card shadow-sm border border-light rounded">
                                <div class="card-body">
                                    <h4 class="card-title text-truncate overflow-hidden">
                                        <t t-esc="file['file_name']"/>
                                    </h4>
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <a t-att-href="'/web/content/%s?download=true' % file['id']" target="_blank">
                                            <div class="oe_attachment_embedded o_image" t-att-title="file['file_name']">
                                                <span t-esc="file['file_name']"/>
                                            </div>
                                        </a>
                                        <span class="badge bg-primary text-white">
                                            <i class="fas fa-eye"></i>
                                            Preview
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </div>
            </div>

            <div class="chatter-container"
                 style="position: fixed; bottom: 220px; right: 20px; width: 300px; max-height: 400px; overflow-y: auto; background-color: #f9f9f9; border: 2px solid #007bff; border-radius: 8px; padding: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">

                <!-- Messages Section -->
                <div>
                    <div class="chatter-header"
                         style="font-weight: bold; font-size: 16px; color: #333; margin-bottom: 5px;">Messages
                    </div>
                    <ul>
                        <t t-foreach="messages" t-as="message">
                            <li class="message"
                                style="margin-bottom: 10px; padding: 8px; border-radius: 5px; background-color: #e6f4ff; border: 1px solid #007bff;">
                                <strong><t t-esc="message.author_id.name"/>:
                                </strong>
                                <span class="chatter-body" style="font-size: 14px; color: #333;" t-raw="message.body"/>
                                <p class="chatter-date" style="font-size: 10px; color: #888;">
                                    <em>
                                        <t t-esc="message.date"/>
                                    </em>
                                </p>
                            </li>
                        </t>
                    </ul>
                </div>

                <!-- Chat Section with Conditional Message Colors -->
                <div class="chatter-messages">
                    <!--                    <t t-set="color_map" t-value="{-->
                    <!--    'user_id_1': {'bg': '#d1e7dd', 'text': '#0f5132'},-->
                    <!--    'user_id_2': {'bg': '#f8d7da', 'text': '#842029'},-->
                    <!--    'user_id_3': {'bg': '#fff3cd', 'text': '#856404'},-->
                    <!--}"/>-->
                    <t t-foreach="registration.message_ids" t-as="message">
                        <div t-attf-class="message-item">

                            <!--                            <div-->
                            <!--                                    t-att-style="(color_map[message.author_id.id] is defined and-->
                            <!--                      'background-color: ' + color_map[message.author_id.id]['bg'] + '; color: ' + color_map[message.author_id.id]['text'] + '; padding: 10px; border-radius: 8px; margin: 5px 0;')-->
                            <!--                      or 'background-color: #f0f0f0; color: #000; padding: 10px; border-radius: 8px; margin: 5px 0;'">-->
                            <!--                                <t t-esc="message.body"/>-->
                            <!--                            </div>-->


                            <div
                                    t-att-style="'background-color: #d1e7dd; color: #0f5132; padding: 10px; border-radius: 8px; margin: 5px 0;'
                                                if message.author_id.id == request.env.user.partner_id.id
                                                else 'background-color: #f8d7da; color: #842029; padding: 10px; border-radius: 8px; margin: 5px 0;'">
                                <t t-esc="message.body"/>
                            </div>


                            <div style="font-size: 0.9em; color: #6c757d;">
                                <span t-esc="message.author_id.name"/>
                                |
                                <span t-esc="message.date"/>
                            </div>
                        </div>
                    </t>
                </div>

                <!-- Activities Section -->
                <div>
                    <div class="chatter-header"
                         style="font-weight: bold; font-size: 16px; color: #333; margin-bottom: 5px;">Scheduled
                        Activities
                    </div>
                    <ul>
                        <t t-foreach="activities" t-as="activity">
                            <li class="activity"
                                style="margin-bottom: 10px; padding: 8px; border-radius: 5px; background-color: #f0f9e8; border: 1px solid #28a745;">
                                <strong>Activity:</strong>
                                <t t-esc="activity.summary"/>
                                <br/>
                                <strong>Due Date:</strong>
                                <t t-esc="activity.date_deadline"/>
                                <br/>
                                <strong>Assigned To:</strong>
                                <t t-esc="activity.user_id.name"/>
                            </li>
                        </t>
                    </ul>
                </div>

                <!-- Message Input Form (Sticky at Bottom) -->
                <form t-att-action="'/chatter/send_message?registration_id=' + str(registration.id)" method="post"
                      style="position: sticky; bottom: 0; background-color: #f9f9f9; padding: 10px 0; width: 100%;">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    <input type="text" name="message_body" placeholder="Type your message here" class="form-control"
                           style="width: calc(100% - 20px); padding: 8px; margin-bottom: 5px;" required="required"/>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Send Message</button>
                </form>
            </div>


            <!--            <div class="chatter-container"-->
            <!--                 style="position: fixed; bottom: 220px; right: 20px; width: 300px; max-height: 400px; overflow-y: auto; background-color: #f9f9f9; border: 2px solid #007bff; border-radius: 8px; padding: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">-->
            <!--                &lt;!&ndash; Messages Section &ndash;&gt;-->
            <!--                <div>-->
            <!--                    <div class="chatter-header"-->
            <!--                         style="font-weight: bold; font-size: 16px; color: #333; margin-bottom: 5px;">Messages-->
            <!--                    </div>-->
            <!--                    <ul>-->
            <!--                        <t t-foreach="messages" t-as="message">-->
            <!--                            <li class="message"-->
            <!--                                style="margin-bottom: 10px; padding: 8px; border-radius: 5px; background-color: #e6f4ff; border: 1px solid #007bff;">-->
            <!--                                <strong><t t-esc="message.author_id.name"/>:-->
            <!--                                </strong>-->
            <!--                                <span class="chatter-body" style="font-size: 14px; color: #333;" t-raw="message.body"/>-->
            <!--                                <p class="chatter-date" style="font-size: 10px; color: #888;">-->
            <!--                                    <em>-->
            <!--                                        <t t-esc="message.date"/>-->
            <!--                                    </em>-->
            <!--                                </p>-->
            <!--                            </li>-->
            <!--                        </t>-->
            <!--                    </ul>-->
            <!--                </div>-->

            <!--                &lt;!&ndash; Activities Section &ndash;&gt;-->
            <!--                <div>-->
            <!--                    <div class="chatter-header"-->
            <!--                         style="font-weight: bold; font-size: 16px; color: #333; margin-bottom: 5px;">Scheduled-->
            <!--                        Activities-->
            <!--                    </div>-->
            <!--                    <ul>-->
            <!--                        <t t-foreach="activities" t-as="activity">-->
            <!--                            <li class="activity"-->
            <!--                                style="margin-bottom: 10px; padding: 8px; border-radius: 5px; background-color: #f0f9e8; border: 1px solid #28a745;">-->
            <!--                                <strong>Activity:</strong>-->
            <!--                                <t t-esc="activity.summary"/>-->
            <!--                                <br/>-->
            <!--                                <strong>Due Date:</strong>-->
            <!--                                <t t-esc="activity.date_deadline"/>-->
            <!--                                <br/>-->
            <!--                                <strong>Assigned To:</strong>-->
            <!--                                <t t-esc="activity.user_id.name"/>-->
            <!--                            </li>-->
            <!--                        </t>-->
            <!--                    </ul>-->
            <!--                </div>-->

            <!--                &lt;!&ndash; Message Input Form (Sticky at Bottom) &ndash;&gt;-->
            <!--                <form t-att-action="'/chatter/send_message?registration_id=' + str(registration.id)" method="post"-->
            <!--                      style="position: sticky; bottom: 0; background-color: #f9f9f9; padding: 10px 0; width: 100%;">-->
            <!--                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>-->
            <!--                    <input type="text" name="message_body" placeholder="Type your message here" class="form-control"-->
            <!--                           required="required"/>-->
            <!--                    <button type="submit" class="btn btn-primary mt-2">Send Message</button>-->
            <!--                </form>-->
            <!--            </div>-->


            <!-- Display Messages (Chatter) -->
            <!--            <h2>Messages</h2>-->
            <!--            <ul>-->
            <!--                <t t-foreach="messages" t-as="message">-->
            <!--                    <li>-->
            <!--                        <strong><t t-esc="message.author_id.name"/>:-->
            <!--                        </strong>-->
            <!--                        <span t-raw="message.body"/>-->
            <!--                        <p>-->
            <!--                            <em>-->
            <!--                                <t t-esc="message.date"/>-->
            <!--                            </em>-->
            <!--                        </p>-->
            <!--                    </li>-->
            <!--                </t>-->
            <!--            </ul>-->

            <!--            &lt;!&ndash; Display Activities &ndash;&gt;-->
            <!--            <h2>Scheduled Activities</h2>-->
            <!--            <ul>-->
            <!--                <t t-foreach="activities" t-as="activity">-->
            <!--                    <li>-->
            <!--                        <strong>Activity:</strong>-->
            <!--                        <t t-esc="activity.summary"/>-->
            <!--                        <br/>-->
            <!--                        <strong>Due Date:</strong>-->
            <!--                        <t t-esc="activity.date_deadline"/>-->
            <!--                        <br/>-->
            <!--                        <strong>Assigned To:</strong>-->
            <!--                        <t t-esc="activity.user_id.name"/>-->
            <!--                    </li>-->
            <!--                </t>-->
            <!--            </ul>-->

        </t>
    </template>

    <!--    <template id="registration_files" name="Registration Files">-->

    <!--        <t t-call="website.layout">-->
    <!--            <div class="container">-->
    <!--                <h1>Customer Registration Files</h1>-->
    <!--                <h3>-->
    <!--                    <t t-esc="registration.name"/>-->
    <!--                </h3>-->
    <!--                <p>-->
    <!--                    <strong>Email:</strong>-->
    <!--                    <t t-esc="registration.email"/>-->
    <!--                </p>-->
    <!--                <p>-->
    <!--                    <strong>Phone:</strong>-->
    <!--                    <t t-esc="registration.phone"/>-->
    <!--                </p>-->

    <!--                <div class="file-gallery">-->
    <!--                    <t t-foreach="files" t-as="file">-->
    <!--                        <div class="file-item">-->
    <!--                            <h4>-->
    <!--                                <t t-esc="file['file_name']"/>-->
    <!--                            </h4>-->
    <!--                            <img t-att-src="file['file_data']" alt="File Image" class="img-thumbnail"-->
    <!--                                 style="max-width:200px;"/>-->
    <!--                        </div>-->
    <!--                    </t>-->
    <!--                </div>-->
    <!--            </div>-->
    <!--        </t>-->

    <!--        &lt;!&ndash;        <t t-call="website.layout">&ndash;&gt;-->
    <!--        &lt;!&ndash;            <div class="container mt-4">&ndash;&gt;-->
    <!--        &lt;!&ndash;                <h3>Uploaded Files of&ndash;&gt;-->
    <!--        &lt;!&ndash;                    <t t-esc="registration.name"/>&ndash;&gt;-->
    <!--        &lt;!&ndash;                </h3>&ndash;&gt;-->
    <!--        &lt;!&ndash;                <ul>&ndash;&gt;-->
    <!--        &lt;!&ndash;                    <t t-foreach="files" t-as="file">&ndash;&gt;-->
    <!--        &lt;!&ndash;                        <li>&ndash;&gt;-->
    <!--        &lt;!&ndash;                            <a t-att-href="'data:application/octet-stream;base64,' + file.file_data"&ndash;&gt;-->
    <!--        &lt;!&ndash;                               t-att-download="file.file_name">&ndash;&gt;-->
    <!--        &lt;!&ndash;                                <t t-esc="file.file_name"/>&ndash;&gt;-->
    <!--        &lt;!&ndash;                            </a>&ndash;&gt;-->
    <!--        &lt;!&ndash;                        </li>&ndash;&gt;-->
    <!--        &lt;!&ndash;                    </t>&ndash;&gt;-->
    <!--        &lt;!&ndash;                </ul>&ndash;&gt;-->
    <!--        &lt;!&ndash;                <a href="/" class="btn btn-primary">Return to Home</a>&ndash;&gt;-->
    <!--        &lt;!&ndash;            </div>&ndash;&gt;-->
    <!--        &lt;!&ndash;        </t>&ndash;&gt;-->
    <!--    </template>-->


    <template id="template_documents" name="Documents">
        <t t-call="website.layout">
            <div class="container">
                <h1>My Documents</h1>
                <t t-if="not registrations">
                    <p>No documents available.</p>
                </t>
                <t t-if="registrations">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Customer Name</th>
                                <th>Files</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="registrations" t-as="registration">
                                <tr>
                                    <td>
                                        <t t-esc="registration.name"/>
                                    </td>
                                    <td>


                                        <td>
                                            <t t-foreach="registration.order_line_ids" t-as="line">
                                                <div>
                                                    <t t-esc="line.file_name"/>
                                                    <a t-att-href="'/web/content/%s?download=true' % line.id"
                                                       target="_blank">
                                                        Download
                                                    </a>
                                                </div>
                                            </t>
                                        </td>


                                        <!--                                        <t t-foreach="registration.order_line_ids" t-as="line">-->
                                        <!--                                            <div>-->
                                        <!--                                                <t t-esc="line.file_name"/>-->

                                        <!--                                                <a t-att-href="'/web/content/customer.registration.order.line,%s/file?download=true' % line.id"-->
                                        <!--                                                   target="_blank">-->
                                        <!--                                                    Download-->
                                        <!--                                                </a>-->

                                        <!--                                                &lt;!&ndash;                                                <a t-att-href="'/web/content/%s?download=true' % line.id"&ndash;&gt;-->
                                        <!--                                                &lt;!&ndash;                                                   target="_blank">&ndash;&gt;-->
                                        <!--                                                &lt;!&ndash;                                                    Download&ndash;&gt;-->
                                        <!--                                                &lt;!&ndash;                                                </a>&ndash;&gt;-->
                                        <!--                                            </div>-->
                                        <!--                                        </t>-->
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </t>
            </div>
        </t>
    </template>


    <template id="website_partner_form">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure oe_empty">
                <section class="s_website_form" data-vcss="001" data-snippet="s_website_form">
                    <div class="container">
                        <form action="/form/submit" method="post" enctype="multipart/form-data">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <div class="col-lg-7 col-md-8">
                                <label class="col-md-3 col-sm-4 control-label" for="att">Attach file</label>
                            </div>
                            <div class="col-lg-7 col-md-8">
                                <input type="file" name="att" accept="image/*,application/pdf,video/*"/>
                            </div>
                            <button type="submit" class="btn btn-primary">Create</button>
                        </form>
                    </div>
                </section>
            </div>
        </t>
    </template>
</odoo>


